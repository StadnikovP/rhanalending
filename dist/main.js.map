{"version":3,"names":[],"mappings":"","sources":["app.js"],"sourcesContent":["var $window, $document, $html;\r\n\r\nvar pageApp = {\r\n    'init': function(){\r\n        var $thisApp = $('#app');\r\n        var curApp = $thisApp.attr('data-app');\r\n        this.globalPollifil();\r\n        if (pageApp[curApp]) { pageApp[curApp]($thisApp); }\r\n    },\r\n    'globalPollifil': function(){\r\n        if (!('classList' in document.documentElement) && Object.defineProperty && typeof HTMLElement !== 'undefined') {\r\n            Object.defineProperty(HTMLElement.prototype, 'classList', {\r\n                get: function() {\r\n                    var self = this;\r\n\r\n                    function update(fn) {\r\n                        return function(value) {\r\n                            var classes = self.className.split(/\\s+/);\r\n                            var index = classes.indexOf(value);\r\n\r\n                            fn(classes, index, value);\r\n                            self.className = classes.join(' ');\r\n                        };\r\n                    }\r\n\r\n                    var ret = {\r\n                        add: update(function(classes, index, value) {\r\n                            ~index || classes.push(value);\r\n                        }),\r\n\r\n                        remove: update(function(classes, index) {\r\n                            ~index && classes.splice(index, 1);\r\n                        }),\r\n\r\n                        toggle: update(function(classes, index, value) {\r\n                            ~index ? classes.splice(index, 1) : classes.push(value);\r\n                        }),\r\n\r\n                        contains: function(value) {\r\n                            return !!~self.className.split(/\\s+/).indexOf(value);\r\n                        },\r\n\r\n                        item: function(i) {\r\n                            return self.className.split(/\\s+/)[i] || null;\r\n                        }\r\n                    };\r\n\r\n                    Object.defineProperty(ret, 'length', {\r\n                        get: function() {\r\n                            return self.className.split(/\\s+/).length;\r\n                        }\r\n                    });\r\n\r\n                    return ret;\r\n                }\r\n            });\r\n        }\r\n\r\n        (function() {\r\n            var lastTime = 0;\r\n            var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n            for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n                window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\r\n                window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']\r\n                    || window[vendors[x]+'CancelRequestAnimationFrame'];\r\n            }\r\n\r\n            if (!window.requestAnimationFrame)\r\n                window.requestAnimationFrame = function(callback, element) {\r\n                    var currTime = new Date().getTime();\r\n                    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n                    var id = window.setTimeout(function() { callback(currTime + timeToCall); },\r\n                        timeToCall);\r\n                    lastTime = currTime + timeToCall;\r\n                    return id;\r\n                };\r\n\r\n            if (!window.cancelAnimationFrame)\r\n                window.cancelAnimationFrame = function(id) {\r\n                    clearTimeout(id);\r\n                };\r\n        }());\r\n    },\r\n};\r\n\r\nvar moduleApp = {\r\n    'init': function () {\r\n        this.firstScreenAnimation();\r\n        this.animationInview();\r\n        this.clickReedText();\r\n        this.video();\r\n    },\r\n    'firstScreenAnimation': function(){\r\n\r\n        $('.header-wrapper').addClass('active');\r\n        $('.js-video').attr('autoplay', 'true');\r\n    },\r\n    'animationInview': function(){\r\n        //one or on\r\n        $('.js-animation-view').on('inview', function(event, isInView) {\r\n            if (isInView) {\r\n                $(this).addClass('active');\r\n                // element is now visible in the viewport\r\n            } else {\r\n                // element has gone out of viewport\r\n            }\r\n        });\r\n    },\r\n    'clickReedText': function(){\r\n        $('.js-pseudo-link').on('click', function(e){\r\n            e.preventDefault();\r\n            var $this = $(this);\r\n            var $parent = $this.parents('.element-reed-text');\r\n            var $wrapper = $parent.find('.js-wrapper-text');\r\n            var heightText = $parent.find('.inner-content').height();\r\n\r\n            if(!$this.hasClass('active')){\r\n                // if(heightText > $wrapper.height){\r\n                    $wrapper.css('height', heightText)\r\n                // }\r\n\r\n                $this.addClass('active');\r\n                $this.html('Свернуть');\r\n            }\r\n            else{\r\n                $this.removeClass('active');\r\n                $this.html('Читать еще');\r\n                $wrapper.css('height', $wrapper.attr('data-height'));\r\n            }\r\n\r\n\r\n\r\n        });\r\n    },\r\n    'video': function(){\r\n        console.log('video');\r\n\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n$(document).ready(function(){\r\n    // init globals\r\n    $window = $(window);\r\n    $document = $(document);\r\n    $html = $('html');\r\n\r\n    pageApp.init();\r\n    moduleApp.init();\r\n});"],"file":"main.js"}